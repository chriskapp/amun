<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Amun manual</title><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><meta name="description" content="This is the offical manual of Amun."><link href="default.css" type="text/css" rel="stylesheet"><script src="default.js" type="text/javascript"></script><script type="text/javascript">
	  $(document).ready(function(){
	    prettyPrint();
	  });
	  </script></head><body><div class="container"><div lang="en" class="book"><div class="titlepage"><div><div><h1 class="title"><a name="d6486e1"></a>Amun manual</h1></div><div><p class="releaseinfo">$Revision: 839 $</p></div><div><p class="pubdate">$Date: 2012-04-07 01:25:13 +0200 (Sa, 07. Apr 2012) $</p></div><div><div class="abstract"><p class="title"><b>Abstract</b></p><p>This is the offical manual of Amun.</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#d6486e12">1. Introduction</a></span></dt><dt><span class="chapter"><a href="#d6486e17">2. Installation and Configuration</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d6486e22">2.1. Requirements</a></span></dt><dt><span class="sect1"><a href="#d6486e27">2.2. Prepare</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d6486e32">2.2.1. Setting rights</a></span></dt><dt><span class="sect2"><a href="#d6486e37">2.2.2. Edit config</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d6486e42">2.3. Run installer</a></span></dt><dt><span class="sect1"><a href="#d6486e47">2.4. Clean up</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d6486e64">3. Manage Amun</a></span></dt><dt><span class="chapter"><a href="#d6486e72">4. Service</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d6486e77">4.1. API</a></span></dt><dt><span class="sect1"><a href="#d6486e87">4.2. Application</a></span></dt><dt><span class="sect1"><a href="#d6486e92">4.3. Gadget</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d6486e97">5. Advanced topics</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d6486e100">5.1. Host</a></span></dt><dt><span class="sect1"><a href="#d6486e107">5.2. Approval</a></span></dt><dt><span class="sect1"><a href="#d6486e116">5.3. Notify</a></span></dt></dl></dd><dt><span class="chapter"><a href="#d6486e131">6. 3rd party applications</a></span></dt><dt><span class="chapter"><a href="#d6486e169">7. Help</a></span></dt></dl></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d6486e12"></a>Chapter&nbsp;1.&nbsp;Introduction</h1></div></div></div><p>Amun is a content managment framework written in PHP 5 and based on the PSX framework. The goal of
		Amun is to build a more federated and programmable web. This is achieved by providing an RESTful API for
		managing and distributing the content in standard formats like JSON, XML, Atom and RSS.</p></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d6486e17"></a>Chapter&nbsp;2.&nbsp;Installation and Configuration</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#d6486e22">2.1. Requirements</a></span></dt><dt><span class="sect1"><a href="#d6486e27">2.2. Prepare</a></span></dt><dd><dl><dt><span class="sect2"><a href="#d6486e32">2.2.1. Setting rights</a></span></dt><dt><span class="sect2"><a href="#d6486e37">2.2.2. Edit config</a></span></dt></dl></dd><dt><span class="sect1"><a href="#d6486e42">2.3. Run installer</a></span></dt><dt><span class="sect1"><a href="#d6486e47">2.4. Clean up</a></span></dt></dl></div><p>This chapter describes howto install and configure Amun properly.</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d6486e22"></a>2.1.&nbsp;Requirements</h2></div></div></div><p>You need PHP &gt;= 5.3 and a MYSQL database.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d6486e27"></a>2.2.&nbsp;Prepare</h2></div></div></div><p>The installation is done via an install script but before you can
			start it you have to make the following changes.</p><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d6486e32"></a>2.2.1.&nbsp;Setting rights</h3></div></div></div><p>Amun needs write permissions to the folder "cache/".</p></div><div class="sect2"><div class="titlepage"><div><div><h3 class="title"><a name="d6486e37"></a>2.2.2.&nbsp;Edit config</h3></div></div></div><p>First open the file configuration.php with you favorite editor. The config
				is an simple associative array with [key] &gt; [value] pairs. Goto the key "psx_url"
				and change the value to your domain. Note do not use a trailing slash. Goto
				the "sql_*" keys and enter your connection datas. Also it is recommended to change
				the "amun_salt" parameter to another random string.</p></div></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d6486e42"></a>2.3.&nbsp;Run installer</h2></div></div></div><p>Now you can point your browser to http://[server]/[path]/public/install.php
			and run the install script. Enter all your data and click on install. Note the
			install script is based on javascript. If the installation was succesful you can goto the main
			page and login with your admin account.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d6486e47"></a>2.4.&nbsp;Clean up</h2></div></div></div><p>It is highly recommended that you delete the files wich are used by the install script.</p><div class="orderedlist"><p class="title"><b>Files that are used by the installation</b></p><ol class="orderedlist" type="I"><li class="listitem"><p>module/install.php</p></li><li class="listitem"><p>public/install.php</p></li><li class="listitem"><p>template/default/system/install.tpl</p></li></ol></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d6486e64"></a>Chapter&nbsp;3.&nbsp;Manage Amun</h1></div></div></div><p>In order to manage Amun you need an client wich connects to the Amun API.
		By default amun offers a workbench wich offers basic functionallity to configure and control
		amun. The endpoint url is at "index.php/workbench". You can find a list of
		available backends at the <a class="ulink" href="http://amun.phpsx.org/index.php/amun/backend.htm" target="_top">website</a>.</p></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d6486e72"></a>Chapter&nbsp;4.&nbsp;Service</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#d6486e77">4.1. API</a></span></dt><dt><span class="sect1"><a href="#d6486e87">4.2. Application</a></span></dt><dt><span class="sect1"><a href="#d6486e92">4.3. Gadget</a></span></dt></dl></div><p>In amun every functionality is provided via a service. All services are normally placed
		in the folder "service" but the location can be defined in the configuration at
		the point "amun_service_path". On Installation some basic services are installed
		but you can install and uninstall every service later on. An service can add functionality to
		the following sections.</p><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d6486e77"></a>4.1.&nbsp;API</h2></div></div></div><p>Every service wich insert, update or delete data defines an RESTful API endpoint
			designed after the <a class="ulink" href="http://opensocial-resources.googlecode.com/svn/spec/2.0.1/Core-API-Server.xml" target="_top">OpenSocial Core API</a>
			specification. The endpoint is normally at the following location:</p><pre class="screen">http://[url]/index.php/api/service/[service]</pre></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d6486e87"></a>4.2.&nbsp;Application</h2></div></div></div><p>The application represents the functionality on the website. In general it
			offers a user interface to use the API.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d6486e92"></a>4.3.&nbsp;Gadget</h2></div></div></div><p>A gadget is a small script wich can be loaded beside an application to
			display additional informations.</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d6486e97"></a>Chapter&nbsp;5.&nbsp;Advanced topics</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#d6486e100">5.1. Host</a></span></dt><dt><span class="sect1"><a href="#d6486e107">5.2. Approval</a></span></dt><dt><span class="sect1"><a href="#d6486e116">5.3. Notify</a></span></dt></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d6486e100"></a>5.1.&nbsp;Host</h2></div></div></div><p>It is possible to connect websites running amun into a network (federated social network). All users within
			the network only have to register at one website. Each user in the network can add other users as friend.</p><p>In order to connect a website you have to add the remote website to the system hosts. Therefore you
			need a valid consumer key and secret of the remote host.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d6486e107"></a>5.2.&nbsp;Approval</h2></div></div></div><p>In order to use the approval system you have to add a record to the system approval table. I.e. if
			you want that comments on the page id 5 should be approved before inserting you have to add the following
			row:</p><pre class="screen">Table: amun_service_comment
Field: pageId
Value: 5</pre><p>That means if an record is inserted into the table "amun_service_comment" and this record has a field "pageId"
			with the value "5" then the record is added to the approval queue. Then you can either update or delete the
			record.</p></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d6486e116"></a>5.3.&nbsp;Notify</h2></div></div></div><p>The table amun_system_notify contains a list wich class gets notified if a record is inserted, updated or deleted
			for the specific table. Amun uses <a class="ulink" href="http://stomp.github.com" target="_top">Stomp</a> to notify other applications about
			events. Your stomp client has to subscribe to <span class="command"><strong>/queue/amun</strong></span> at the broker. I.e. if you want send a message
			to all listeners if a news is inserted you have to add the following data:</p><pre class="screen">Priority: 0
Table: amun_service_news
Class: Amun_Notify_Stomp</pre><p>The news is submitted JSON encoded to all subscribers. In this way you can delegate time consuming tasks like
			sending bulk mails, notifing users per XMPP or generating pdfs to other applications. Also almost every programming
			language has an stomp client library. A basic implementation of an stomp listener is available in the scripts folder.</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d6486e131"></a>Chapter&nbsp;6.&nbsp;3rd party applications</h1></div></div></div><p>Amun uses some 3rd party libraries and applications. Thx to all the developers
		for making such great software!</p><div class="orderedlist"><p class="title"><b>A list of all 3rd party applications used by Amun in alphabetical order.</b></p><ol class="orderedlist" type="I"><li class="listitem"><p>Ace: <a class="ulink" href="http://ace.ajax.org/" target="_top">http://ace.ajax.org/</a></p></li><li class="listitem"><p>Blueprint CSS Framework: <a class="ulink" href="http://blueprintcss.org" target="_top">http://blueprintcss.org</a></p></li><li class="listitem"><p>Google Code Prettify: <a class="ulink" href="http://code.google.com/p/google-code-prettify/" target="_top">http://code.google.com/p/google-code-prettify</a></p></li><li class="listitem"><p>HTMLPurifier: <a class="ulink" href="http://htmlpurifier.org" target="_top">http://htmlpurifier.org</a></p></li><li class="listitem"><p>jQuery: <a class="ulink" href="http://jquery.com" target="_top">http://jquery.com</a></p></li><li class="listitem"><p>PSX: <a class="ulink" href="http://phpsx.org" target="_top">http://phpsx.org</a></p></li></ol></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d6486e169"></a>Chapter&nbsp;7.&nbsp;Help</h1></div></div></div><p>Amun is currently in an early stage so the documentation is very sparse. If you need help you
		have the followign options.</p><div class="orderedlist"><p class="title"><b>Things you can do if you have any problems with Amun</b></p><ol class="orderedlist" type="I"><li class="listitem"><p>Write an email to the <a class="ulink" href="http://groups.google.com/group/phpsx" target="_top">mailinglist</a></p></li><li class="listitem"><p>Join the IRC channel #phpsx on freenode</p></li><li class="listitem"><p>Write an issue to the <a class="ulink" href="http://code.google.com/p/amun/issues/list" target="_top">bugtracker</a></p></li></ol></div></div></div></div></body></html>