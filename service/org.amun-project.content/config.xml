<?xml version="1.0" encoding="UTF-8"?>
<service xmlns="http://amun-project.org" signature="e5e299e1211bbdb7a4a79eec8be912e8b7ce1f79">
  <status>system</status>
  <name>content</name>
  <description>Basic service wich handles pages and gadgets</description>
  <path>/content</path>
  <namespace>content</namespace>
  <type>http://ns.amun-project.org/2011/amun/service/content</type>
  <link>http://amun.phpsx.org</link>
  <author><![CDATA[Christoph Kappestein <k42b3.x@gmail.com>]]></author>
  <license>GPLv3</license>
  <version>0.0.1</version>
  <provider>http://amun-project.org</provider>
  <api>
    <service>
      <type>http://ns.amun-project.org/2011/amun/service/content/gadget</type>
      <type>http://ns.amun-project.org/2011/amun/data/1.0</type>
      <uri>/gadget</uri>
    </service>
    <service>
      <type>http://ns.amun-project.org/2011/amun/service/content/page</type>
      <type>http://ns.amun-project.org/2011/amun/data/1.0</type>
      <uri>/page</uri>
    </service>
    <service>
      <type>http://ns.amun-project.org/2011/amun/service/content/page/gadget</type>
      <type>http://ns.amun-project.org/2011/amun/data/1.0</type>
      <uri>/page/gadget</uri>
    </service>
    <service>
      <type>http://ns.amun-project.org/2011/amun/service/content/page/option</type>
      <type>http://ns.amun-project.org/2011/amun/data/1.0</type>
      <uri>/page/option</uri>
    </service>
  </api>
  <permissions>
    <perm name="view" description="Content view"/>
    <perm name="add" description="Content add"/>
    <perm name="edit" description="Content edit"/>
    <perm name="delete" description="Content delete"/>
    <perm name="gadget_view" description="Content Gadget view"/>
    <perm name="gadget_add" description="Content Gadget add"/>
    <perm name="gadget_edit" description="Content Gadget edit"/>
    <perm name="gadget_delete" description="Content Gadget delete"/>
    <perm name="page_view" description="Content Page view"/>
    <perm name="page_add" description="Content Page add"/>
    <perm name="page_edit" description="Content Page edit"/>
    <perm name="page_delete" description="Content Page delete"/>
    <perm name="page_preview" description="Content Page preview"/>
    <perm name="page_gadget_view" description="Content Page Gadget view"/>
    <perm name="page_gadget_add" description="Content Page Gadget add"/>
    <perm name="page_gadget_edit" description="Content Page Gadget edit"/>
    <perm name="page_gadget_delete" description="Content Page Gadget delete"/>
    <perm name="page_option_view" description="Content Page Option view"/>
    <perm name="page_option_add" description="Content Page Option add"/>
    <perm name="page_option_edit" description="Content Page Option edit"/>
    <perm name="page_option_delete" description="Content Page Option delete"/>
  </permissions>
  <registry>
    <table name="content_gadget"/>
    <table name="content_page"/>
    <table name="content_page_gadget"/>
    <table name="content_page_option"/>
    <table name="content_page_right"/>
  </registry>
  <event>
    <listener name="lrdd.resource_discovery" class="\AmunService\Content\LrddListener"/>
  </event>
  <library>
    <dir name="AmunService">
      <dir name="Content">
        <dir name="Gadget">
          <dir name="Filter">
            <file name="Path.php" md5="7f1d5a1bb465b7837d347c3851188180"/>
          </dir>
          <file name="Form.php" md5="929e04c235694782a7e23cdfe83005d4"/>
          <file name="Handler.php" md5="108771ef0cd3ad882887a868c77ba4cc"/>
          <file name="Record.php" md5="8db47b6c85c26cd5ec40400c23aed425"/>
          <file name="Table.php" md5="1ff969cbbb45f9d4fc31c4fc2108cf2a"/>
        </dir>
        <file name="LrddListener.php" md5="a77dbbadd2fa631b6ee6b2fd9563cdb2"/>
        <dir name="Page">
          <dir name="Filter">
            <file name="Load.php" md5="d2bd365f3d09d14691f84dafa7d041ab"/>
            <file name="ParentId.php" md5="12935a66926bc1164eb0dcca9bc58894"/>
            <file name="Status.php" md5="6fb3fb6eb05f22558d3fd7cae60ecc5b"/>
            <file name="Template.php" md5="eb66667aacfb9f8f202df0ac7e936423"/>
            <file name="TitleExists.php" md5="a80009488e3919a31f2e8846ae9472cb"/>
          </dir>
          <file name="Form.php" md5="27f23776c6aa1a0a118495e5a1b9df7d"/>
          <dir name="Gadget">
            <file name="Form.php" md5="566a59f4ac1faa05449229a63e1fb17a"/>
            <file name="Handler.php" md5="fefe95b69208f4a9bb219825402b08e9"/>
            <file name="Record.php" md5="ffe2dae2e37f93efd2f4f15c33e091ab"/>
            <file name="Table.php" md5="7bc34aa354ef642dd315c111eb2db05f"/>
          </dir>
          <file name="Handler.php" md5="97413ade8acd355c9b2623cd67a9fcc7"/>
          <dir name="Option">
            <file name="Form.php" md5="8c44c1bbd17ea63697af830263c99f6f"/>
            <file name="Handler.php" md5="2db49ead317eebc9086638607173d72a"/>
            <file name="Record.php" md5="809a3a80a6e2fc3bbb51a8ec6662d47e"/>
            <file name="Table.php" md5="302b0f4896106973bf6e1fd619eb5330"/>
          </dir>
          <file name="Record.php" md5="e604c9fca050f9568338d9f5bb037540"/>
          <file name="Table.php" md5="733e7775343b71b4994ff261e26e4bf0"/>
        </dir>
      </dir>
    </dir>
  </library>
  <database>
    <query><![CDATA[CREATE TABLE IF NOT EXISTS `{table.content_gadget}` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `globalId` varchar(36) NOT NULL,
  `serviceId` int(10) NOT NULL,
  `rightId` int(10) NOT NULL,
  `type` enum('inline','iframe','ajax') NOT NULL DEFAULT 'inline',
  `name` varchar(64) NOT NULL,
  `title` varchar(32) NOT NULL,
  `path` varchar(256) NOT NULL,
  `param` text,
  `cache` tinyint(1) NOT NULL,
  `expire` varchar(25) NOT NULL,
  `date` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `globalId` (`globalId`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;]]></query>
    <query><![CDATA[CREATE TABLE IF NOT EXISTS `{table.content_page}` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `parentId` int(10) NOT NULL,
  `globalId` varchar(36) NOT NULL,
  `serviceId` int(10) NOT NULL,
  `rightId` int(10) NOT NULL,
  `status` int(10) NOT NULL,
  `load` int(10) NOT NULL DEFAULT '3',
  `sort` int(10) NOT NULL DEFAULT '0',
  `path` varchar(256) NOT NULL,
  `urlTitle` varchar(32) NOT NULL,
  `title` varchar(32) NOT NULL,
  `template` text NOT NULL,
  `description` varchar(256) NOT NULL,
  `keywords` varchar(256) NOT NULL,
  `cache` tinyint(1) NOT NULL,
  `expire` varchar(25) NOT NULL,
  `publishDate` datetime NOT NULL,
  `date` datetime NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `globalId` (`globalId`),
  UNIQUE KEY `path` (`path`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8;]]></query>
    <query><![CDATA[CREATE TABLE IF NOT EXISTS `{table.content_page_gadget}` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `pageId` int(10) NOT NULL,
  `gadgetId` int(10) NOT NULL,
  `sort` int(10) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `pageGadgetId` (`pageId`,`gadgetId`)
) ENGINE=MyISAM DEFAULT CHARSET=ascii;]]></query>
    <query><![CDATA[CREATE TABLE IF NOT EXISTS `{table.content_page_option}` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `optionId` int(10) NOT NULL,
  `rightId` int(10) NOT NULL,
  `srcPageId` int(10) NOT NULL,
  `destPageId` int(10) NOT NULL,
  `name` varchar(32) NOT NULL,
  `href` varchar(512) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=ascii;]]></query>
  </database>
</service>
